[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nLog = Package.logging.Log;\nRandom = Package.random.Random;\nEJSON = Package.ejson.EJSON;\nSpacebars = Package.spacebars.Spacebars;\ncheck = Package.check.check;\nMatch = Package.check.Match;\nECMAScript = Package.ecmascript.ECMAScript;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\nmain = Package.webapp.main;\nWebAppInternals = Package.webapp.WebAppInternals;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nPromise = Package.promise.Promise;\nMap = Package['ecmascript-collections'].Map;\nSet = Package['ecmascript-collections'].Set;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// reactive-maps-example.js                                            //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nMarkers = new Mongo.Collection('markers');                             // 1\n                                                                       //\nif (Meteor.isClient) {                                                 // 3\n  Template.map.onCreated(function () {                                 // 4\n    GoogleMaps.ready('map', function (map) {                           // 5\n      google.maps.event.addListener(map.instance, 'click', function (event) {\n        Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n      });                                                              //\n                                                                       //\n      var markers = {};                                                // 10\n                                                                       //\n      Markers.find().observe({                                         // 12\n        added: function (document) {                                   // 13\n          var marker = new google.maps.Marker({                        // 14\n            draggable: true,                                           // 15\n            animation: google.maps.Animation.DROP,                     // 16\n            position: new google.maps.LatLng(document.lat, document.lng),\n            map: map.instance,                                         // 18\n            id: document._id                                           // 19\n          });                                                          //\n                                                                       //\n          google.maps.event.addListener(marker, 'dragend', function (event) {\n            Markers.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() } });\n          });                                                          //\n                                                                       //\n          markers[document._id] = marker;                              // 26\n        },                                                             //\n        changed: function (newDocument, oldDocument) {                 // 28\n          markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n        },                                                             //\n        removed: function (oldDocument) {                              // 31\n          markers[oldDocument._id].setMap(null);                       // 32\n          google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n          delete markers[oldDocument._id];                             // 34\n        }                                                              //\n      });                                                              //\n    });                                                                //\n  });                                                                  //\n                                                                       //\n  Meteor.startup(function () {                                         // 40\n    GoogleMaps.load();                                                 // 41\n  });                                                                  //\n                                                                       //\n  Template.map.helpers({                                               // 44\n    mapOptions: function () {                                          // 45\n      if (GoogleMaps.loaded()) {                                       // 46\n        return {                                                       // 47\n          center: new google.maps.LatLng(-37.8136, 144.9631),          // 48\n          zoom: 8                                                      // 49\n        };                                                             //\n      }                                                                //\n    }                                                                  //\n  });                                                                  //\n}                                                                      //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/reactive-maps-example.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/reactive-maps-example.js"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;;AAE1C,IAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,UAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,YAAW;AAChC,cAAU,CAAC,KAAK,CAAC,KAAK,EAAE,UAAS,GAAG,EAAE;AACpC,YAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAS,KAAK,EAAE;AACnE,eAAO,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;OACtE,CAAC,CAAC;;AAEH,UAAI,OAAO,GAAG,EAAE,CAAC;;AAEjB,aAAO,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC;AACrB,aAAK,EAAE,UAAU,QAAQ,EAAE;AACzB,cAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;AAClC,qBAAS,EAAE,IAAI;AACf,qBAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI;AACrC,oBAAQ,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC;AAC5D,eAAG,EAAE,GAAG,CAAC,QAAQ;AACjB,cAAE,EAAE,QAAQ,CAAC,GAAG;WACjB,CAAC,CAAC;;AAEH,gBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,SAAS,EAAE,UAAS,KAAK,EAAE;AAC/D,mBAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,EAAC,CAAC,CAAC;WAC1F,CAAC,CAAC;;AAEH,iBAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;SAChC;AACD,eAAO,EAAE,UAAU,WAAW,EAAE,WAAW,EAAE;AAC3C,iBAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,WAAW,CAAC,GAAG,EAAE,CAAC,CAAC;SACtF;AACD,eAAO,EAAE,UAAU,WAAW,EAAE;AAC9B,iBAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACtC,gBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC;AACnE,iBAAO,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;SACjC;OACF,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;;AAEH,QAAM,CAAC,OAAO,CAAC,YAAW;AACxB,cAAU,CAAC,IAAI,EAAE,CAAC;GACnB,CAAC,CAAC;;AAEH,UAAQ,CAAC,GAAG,CAAC,OAAO,CAAC;AACnB,cAAU,EAAE,YAAW;AACrB,UAAI,UAAU,CAAC,MAAM,EAAE,EAAE;AACvB,eAAO;AACL,gBAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ,CAAC;AAClD,cAAI,EAAE,CAAC;SACR,CAAC;OACH;KACF;GACF,CAAC,CAAC;CACJ,wE","file":"/reactive-maps-example.js","sourcesContent":["Markers = new Mongo.Collection('markers');\n\nif (Meteor.isClient) {\n  Template.map.onCreated(function() {\n    GoogleMaps.ready('map', function(map) {\n      google.maps.event.addListener(map.instance, 'click', function(event) {\n        Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n      });\n\n      var markers = {};\n\n      Markers.find().observe({\n        added: function (document) {\n          var marker = new google.maps.Marker({\n            draggable: true,\n            animation: google.maps.Animation.DROP,\n            position: new google.maps.LatLng(document.lat, document.lng),\n            map: map.instance,\n            id: document._id\n          });\n\n          google.maps.event.addListener(marker, 'dragend', function(event) {\n            Markers.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() }});\n          });\n\n          markers[document._id] = marker;\n        },\n        changed: function (newDocument, oldDocument) {\n          markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n        },\n        removed: function (oldDocument) {\n          markers[oldDocument._id].setMap(null);\n          google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n          delete markers[oldDocument._id];\n        }\n      });\n    });\n  });\n\n  Meteor.startup(function() {\n    GoogleMaps.load();\n  });\n\n  Template.map.helpers({\n    mapOptions: function() {\n      if (GoogleMaps.loaded()) {\n        return {\n          center: new google.maps.LatLng(-37.8136, 144.9631),\n          zoom: 8\n        };\n      }\n    }\n  });\n}\n"]}}]